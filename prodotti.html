<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Prodotti â€“ Gianni Vetrugno Infissi</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family:"Segoe UI",sans-serif;
      color:#333;
      min-height:100vh;
      background:url('base.jpg') top center repeat-y;
      background-size:100% auto;
    }
    body::before {
      content:""; position:fixed; top:0; left:0;
      width:100%; height:100%;
      background:rgba(255,255,255,0.6); z-index:0;
    }

    .site-header {
      position:sticky; top:0; z-index:10;
      display:flex; align-items:center; justify-content:space-between;
      padding:10px 30px; background:rgba(255,128,0,0.9);
      box-shadow:0 2px 6px rgba(0,0,0,0.2);
    }
    .site-header .brand { display:flex; align-items:center; gap:12px; }
    .site-header .brand img { width:50px; }
    .site-header .brand h1 { font-size:20px; color:#fff; letter-spacing:1px; }
    nav {
      display:flex; gap:24px;
      background:rgba(0,0,0,0.7); padding:8px 16px;
      border-radius:6px; z-index:11;
    }
    nav a {
      color:#fff; text-decoration:none;
      padding:6px 12px; border-radius:4px;
      font-weight:500; transition:background .25s,transform .2s;
    }
    nav a:hover { background:#e67300; transform:translateY(-2px); }

    .container {
      position:relative; z-index:5;
      max-width:1100px;
      margin:60px auto 20px;
      background:#fff; border-radius:8px;
      padding:30px; box-shadow:0 4px 12px rgba(0,0,0,0.1);
    }
    .container p { margin-bottom:16px; line-height:1.6; }

    .section-intro {
      text-align:center;
      margin:20px 0 30px;
      font-size:1.2rem;
      color:#444;
      font-weight:500;
    }

    /* Barra filtri materiali */
    .filter-bar {
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-bottom:25px;
      justify-content:flex-start;
    }
    .filter-btn {
      border:none;
      padding:8px 14px;
      border-radius:999px;
      font-size:0.9rem;
      font-weight:600;
      cursor:pointer;
      background:rgba(0,0,0,0.05);
      color:#444;
      display:flex;
      align-items:center;
      gap:6px;
      box-shadow:0 1px 3px rgba(0,0,0,0.15);
      transition:background .25s, transform .15s, box-shadow .25s, color .25s;
      white-space:nowrap;
    }
    .filter-btn span.dot {
      width:10px; height:10px;
      border-radius:50%;
      background:#ff8000;
      opacity:0.6;
    }
    .filter-btn[data-filter="A"] span.dot { background:#ffb347; }  /* alluminio */
    .filter-btn[data-filter="F"] span.dot { background:#666666; }  /* ferro */
    .filter-btn[data-filter="P"] span.dot { background:#4da6ff; }  /* pvc  */
    .filter-btn.active {
      background:#ff8000;
      color:#fff;
      box-shadow:0 3px 8px rgba(0,0,0,0.25);
      transform:translateY(-1px);
    }
    .filter-btn.active span.dot {
      opacity:1;
      background:#fff;
    }

    .product-video {
      overflow:hidden; border-radius:6px;
      box-shadow:0 4px 8px rgba(0,0,0,0.1);
      margin-bottom:30px; background:#000;
    }
    .product-video video {
      width:100%; display:block;
      border-radius:6px;
    }

    .product-gallery { column-count:3; column-gap:15px; }
    .product {
      break-inside:avoid;
      margin-bottom:15px;
      border-radius:6px;
      overflow:hidden;
      box-shadow:0 4px 8px rgba(0,0,0,0.1);
      background:#fff;
      display:block;
      opacity:1;
      transition:opacity .2s ease-out, transform .2s ease-out;
    }
    .product.hidden {
      opacity:0;
      transform:scale(0.98);
      display:none;
    }
    .product img {
      width:100%; height:auto;
      display:block;
      border-radius:6px;
      transition:transform .3s;
      cursor:pointer;
    }
    .product img:hover { transform:scale(1.02); }

    .product-label {
      padding:8px 10px 10px;
      font-size:0.8rem;
      color:#666;
      display:flex;
      flex-wrap:wrap;
      gap:6px;
    }
    .chip {
      padding:2px 8px;
      border-radius:999px;
      font-size:0.7rem;
      background:#f5f5f5;
      color:#555;
    }
    .chip.A { border:1px solid #ffb347; }
    .chip.F { border:1px solid #666666; }
    .chip.P { border:1px solid #4da6ff; }
    .chip.X { border:1px solid #cccccc; }

    .lightbox {
      display:none; position:fixed; top:0; left:0;
      width:100%; height:100%;
      background:rgba(0,0,0,0.8);
      justify-content:center; align-items:center;
      z-index:20;
    }
    .lightbox-img { max-width:90%; max-height:90%; border-radius:6px; }
    .lightbox .close {
      position:absolute; top:20px; right:30px;
      font-size:32px; color:#fff; cursor:pointer;
    }

    #page-transition {
      position:fixed; width:80vw; height:80vh;
      top:10vh; left:10vw;
      background-size:cover; background-position:center;
      opacity:0; transform:rotate(-30deg) scale(.7);
      transition:opacity .6s, transform .6s;
      z-index:30; border-radius:12px;
      box-shadow:0 0 20px rgba(0,0,0,0.3);
      pointer-events:none;
    }
    #page-transition.active { opacity:1; transform:rotate(0) scale(1); }

    @media(max-width:768px) { .product-gallery { column-count:2; } }
    @media(max-width:480px) { .product-gallery { column-count:1; } }

    /* ðŸ”½ Responsive header + container */
    @media (max-width: 768px) {
      .site-header {
        flex-direction: column;
        align-items: flex-start;
        padding: 10px 15px;
      }
      nav {
        margin-top: 10px;
        flex-direction: column;
        gap: 10px;
        width: 100%;
      }
      nav a {
        display: block;
        text-align: center;
        width: 100%;
        padding: 10px 16px;
      }
      .container {
        margin: 20px 10px;
        padding: 20px;
      }
      .filter-bar {
        gap:8px;
      }
    }

    /* Su mobile/tablet niente overlay transizione */
    @media (max-width: 1024px) {
      #page-transition {
        display:none !important;
      }
    }

    @media (max-width: 480px) {
      .site-header .brand h1 { font-size: 16px; }
      .section-intro { font-size: 1rem; }
    }
  </style>
</head>
<body>
  <div id="page-transition"></div>

  <header class="site-header">
    <div class="brand">
      <img src="logoO.png" alt="Logo">
      <h1>Gianni Vetrugno</h1>
    </div>
    <nav>
      <a href="index.html">Home</a>
      <a href="prodotti.html">Prodotti</a>
      <a href="contatti.html">Contatti</a>
    </nav>
  </header>

  <section class="container">
    <p>Scopri la nostra gamma di infissi in alluminio, ferro e PVC. Ogni prodotto Ã¨ realizzato con materiali di alta qualitÃ  per garantirti durata e sicurezza.</p>

    <div class="section-intro">
      Guarda il video introduttivo e continua a scoprire i nostri lavori nella galleria fotografica qui sotto.
    </div>

    <div class="product-video">
      <video autoplay muted loop playsinline controls>
        <source src="Video_Expo_Stand.mp4" type="video/mp4">
        <source src="Video_Expo_Stand.mov" type="video/quicktime">
        Il tuo browser non supporta il video HTML5.
      </video>
    </div>

    <!-- FILTRO MATERIALI (solo singole categorie) -->
    <div class="filter-bar">
      <button class="filter-btn active" data-filter="all">
        <span class="dot"></span> Tutti i prodotti
      </button>
      <button class="filter-btn" data-filter="A">
        <span class="dot"></span> Alluminio
      </button>
      <button class="filter-btn" data-filter="F">
        <span class="dot"></span> Ferro
      </button>
      <button class="filter-btn" data-filter="P">
        <span class="dot"></span> PVC
      </button>
    </div>

    <!-- GALLERIA PRODOTTI CON NUOVI NOMI -->
    <div class="product-gallery">
      <!-- imAF12 -->
      <div class="product">
        <img src="imAF12.jpg" alt="Infisso in alluminio e ferro">
        <div class="product-label"></div>
      </div>
      <!-- imF13 -->
      <div class="product">
        <img src="imF13.jpg" alt="Infisso in ferro">
        <div class="product-label"></div>
      </div>
      <!-- imF14 -->
      <div class="product">
        <img src="imF14.jpg" alt="Infisso in ferro">
        <div class="product-label"></div>
      </div>
      <!-- imF15 -->
      <div class="product">
        <img src="imF15.jpg" alt="Infisso in ferro">
        <div class="product-label"></div>
      </div>
      <!-- imF16 -->
      <div class="product">
        <img src="imF16.jpg" alt="Infisso in ferro">
        <div class="product-label"></div>
      </div>
      <!-- imF17 -->
      <div class="product">
        <img src="imF17.jpg" alt="Infisso in ferro">
        <div class="product-label"></div>
      </div>
      <!-- imP18 -->
      <div class="product">
        <img src="imP18.jpg" alt="Infisso in PVC">
        <div class="product-label"></div>
      </div>
      <!-- imF19 -->
      <div class="product">
        <img src="imF19.jpg" alt="Infisso in ferro">
        <div class="product-label"></div>
      </div>
      <!-- im20 (nessuna lettera -> solo "Tutti i prodotti") -->
      <div class="product">
        <img src="im20.jpg" alt="Infisso">
        <div class="product-label"></div>
      </div>
      <!-- imA3 -->
      <div class="product">
        <img src="imA3.jpg" alt="Infisso in alluminio">
        <div class="product-label"></div>
      </div>
      <!-- imA10 -->
      <div class="product">
        <img src="imA10.jpg" alt="Infisso in alluminio">
        <div class="product-label"></div>
      </div>
      <!-- imAF1 -->
      <div class="product">
        <img src="imAF1.jpg" alt="Infisso in alluminio e ferro">
        <div class="product-label"></div>
      </div>
      <!-- imAP8 -->
      <div class="product">
        <img src="imAP8.jpg" alt="Infisso in alluminio e PVC">
        <div class="product-label"></div>
      </div>
      <!-- imF2 -->
      <div class="product">
        <img src="imF2.jpg" alt="Infisso in ferro">
        <div class="product-label"></div>
      </div>
      <!-- imF4 -->
      <div class="product">
        <img src="imF4.jpg" alt="Infisso in ferro">
        <div class="product-label"></div>
      </div>
      <!-- imF5 -->
      <div class="product">
        <img src="imF5.jpg" alt="Infisso in ferro">
        <div class="product-label"></div>
      </div>
      <!-- imF7 -->
      <div class="product">
        <img src="imF7.jpg" alt="Infisso in ferro">
        <div class="product-label"></div>
      </div>
      <!-- imF9 -->
      <div class="product">
        <img src="imF9.jpg" alt="Infisso in ferro">
        <div class="product-label"></div>
      </div>
      <!-- imP6 -->
      <div class="product">
        <img src="imP6.jpg" alt="Infisso in PVC">
        <div class="product-label"></div>
      </div>
      <!-- imP11 -->
      <div class="product">
        <img src="imP11.jpg" alt="Infisso in PVC">
        <div class="product-label"></div>
      </div>
    </div>
  </section>

  <div class="lightbox" id="lightbox">
    <span class="close">&times;</span>
    <img class="lightbox-img" src="" alt="">
  </div>

  <script>
    (function(){
      const ov = document.getElementById('page-transition');

      function canUseTransition() {
        if (!ov) return false;
        const style = window.getComputedStyle(ov);
        return style.display !== 'none';
      }

      if (canUseTransition()) {
        ov.style.backgroundImage = "url('foto_aziendale.jpg')";
      }

      document.querySelectorAll('nav a').forEach(a=>{
        a.addEventListener('click', e=>{
          if (!canUseTransition()) return;
          e.preventDefault();
          ov.classList.add('active');
          setTimeout(()=> location.href = a.href, 600);
        });
      });

      // LIGHTBOX
      document.querySelectorAll('.product img').forEach(img=>{
        img.addEventListener('click', ()=>{
          const lb = document.getElementById('lightbox');
          lb.style.display = 'flex';
          lb.querySelector('.lightbox-img').src = img.src;
        });
      });
      document.querySelector('.lightbox .close').addEventListener('click', ()=>{
        document.getElementById('lightbox').style.display = 'none';
      });

      // --- LOGICA MATERIALI IN BASE AL NOME FILE ---
      const products = document.querySelectorAll('.product');

      products.forEach(card => {
        const img = card.querySelector('img');
        const src = img.getAttribute('src');      // es: imAF12.jpg
        const match = src.match(/^im([AFP]+)\d+/);
        let mats = [];
        if (match && match[1]) {
          const code = match[1];
          if (code.includes('A')) mats.push('A');
          if (code.includes('F')) mats.push('F');
          if (code.includes('P')) mats.push('P');
        }
        // se non c'Ã¨ alcuna lettera -> solo in "Tutti i prodotti"
        if (mats.length === 0) {
          card.dataset.materials = '';
        } else {
          card.dataset.materials = mats.join(',');
        }

        // etichette sotto le immagini
        const label = card.querySelector('.product-label');
        label.innerHTML = '';
        if (mats.includes('A')) {
          const chipA = document.createElement('span');
          chipA.className = 'chip A';
          chipA.textContent = 'Alluminio';
          label.appendChild(chipA);
        }
        if (mats.includes('F')) {
          const chipF = document.createElement('span');
          chipF.className = 'chip F';
          chipF.textContent = 'Ferro';
          label.appendChild(chipF);
        }
        if (mats.includes('P')) {
          const chipP = document.createElement('span');
          chipP.className = 'chip P';
          chipP.textContent = 'PVC';
          label.appendChild(chipP);
        }
        if (mats.length === 0) {
          const chipX = document.createElement('span');
          chipX.className = 'chip X';
          chipX.textContent = 'Qualsiasi materiale';
          label.appendChild(chipX);
        }
      });

      function matchMaterials(materials, filterCode) {
        if (filterCode === 'all') return true;
        if (!materials) return false; // immagini senza codice: solo in "Tutti"
        const matsArr = materials.split(',');
        // per A, F o P basta che il materiale sia presente
        return matsArr.includes(filterCode);
      }

      const filterButtons = document.querySelectorAll('.filter-btn');
      filterButtons.forEach(btn => {
        btn.addEventListener('click', () => {
          const filter = btn.dataset.filter;

          filterButtons.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');

          products.forEach(card => {
            const mats = card.dataset.materials || '';
            if (filter === 'all' || matchMaterials(mats, filter)) {
              card.classList.remove('hidden');
            } else {
              card.classList.add('hidden');
            }
          });
        });
      });
    })();
  </script>
</body>
</html>
